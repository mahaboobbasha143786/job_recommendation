{% extends 'jobs/base.html' %}

{% block title %}Saved Jobs | JobPortal{% endblock %}

{% block content %}
<h2 class="mb-4 text-center fw-bold">Saved Jobs</h2>
<div class="row g-4">
  {% for job in jobs %}
  <div class="col-md-6 col-lg-4">
    <div class="card h-100 shadow-sm">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title fw-bold">{{ job.title }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">{{ job.company }}</h6>
        <p class="card-text flex-grow-1">{{ job.description|truncatechars:100 }}</p>
        <p>
          <span class="badge bg-success me-1"><i class="fa-solid fa-code"></i> {{ job.skills_required }}</span>
          <span class="badge bg-info text-dark"><i class="fa-solid fa-location-dot"></i> {{ job.location }}</span>
        </p>
        {% if user.is_authenticated %}
    <a href="{% url 'apply_job' job.id %}" class="btn btn-success">Apply Now</a>
{% else %}
    <a href="{% url 'login' %}?next={{ request.path }}" class="btn btn-secondary">
        Login to Apply
    </a>
{% endif %}
        {% if user.is_authenticated %}
            <a href="{% url 'save_job' job.id %}" class="btn btn-outline-success btn-sm mt-2"><i class="fa-solid fa-heart"></i> Save</a>
        {% endif %}
      </div>
    </div>
  </div>
  {% empty %}
    <p class="text-center fw-bold">No saved jobs yet.</p>
  {% endfor %}
</div>
{% endblock %}
